<ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements">
    <ui:VisualElement name="main-container" style="flex-grow: 1;">
        <uie:Toolbar>
            <ui:Button text="History" name="history-button" tooltip="Show or hide chat history."/>
            <ui:Button text="New chat" name="new-chat-button" tooltip="Start a new chat session."/>
            <ui:VisualElement style="flex-grow: 1;"/>
            <ui:VisualElement name="work-mode-popup-placeholder" style="width: 80px;"/>
            <ui:VisualElement name="provider-popup-placeholder" style="width: 80px;"/>
            <ui:VisualElement name="model-popup-placeholder" style="width: 150px;"/>
            <ui:Label name="fetching-models-label" text="Fetching..." style="display: none;"/>
            <ui:Button text="Settings" name="settings-button" tooltip="Open Ariko settings."/>
        </uie:Toolbar>

        <ui:VisualElement name="content-area" style="flex-grow: 1; flex-direction: row;">
            <ui:VisualElement name="history-panel" class="history-panel" style="display: none;">
                <ui:VisualElement name="history-header-container" class="history-header">
                    <ui:Label text="Chat history" style="flex-grow: 1;"/>
                    <ui:Button text="Clear all" name="clear-history-button" tooltip="Delete all saved chat sessions."/>
                </ui:VisualElement>
                <ui:ScrollView name="history-list" style="flex-grow: 1;"/>
            </ui:VisualElement>
            <ui:VisualElement name="splitter" class="splitter"/>
            <ui:VisualElement name="chat-panel" style="flex-grow: 1;">
                <ui:ScrollView name="chat-history" style="flex-grow: 1; min-height: 0;"/>
                <ui:VisualElement name="vertical-splitter" class="vertical-splitter"/>
                <ui:VisualElement name="footer" style="flex-shrink: 0;">
                    <ui:VisualElement name="context-area" class="attachment-box">
                        <ui:VisualElement style="flex-direction: row; align-items: center;">
                            <ui:Toggle name="auto-context-toggle" label="Auto-Context from Selection"/>
                            <ui:VisualElement style="flex-grow: 1;"/>
                            <ui:Button text="Add File..." name="add-file-button"/>
                        </ui:VisualElement>
                        <ui:VisualElement name="manual-attachments-list"/>
                    </ui:VisualElement>

                    <ui:VisualElement class="input-row">
                        <ui:TextField name="user-input" multiline="true" class="boxed-input"
                                      tooltip="Ask a question or paste an error here."/>
                        <ui:Button text="Send" name="send-button" class="send-button"
                                   tooltip="Send the message (Enter). Shift+Enter inserts a newline."/>
                        <ui:Button text="Cancel" name="cancel-button" class="cancel-button" style="display: none;"
                                   tooltip="Cancel the running request."/>
                    </ui:VisualElement>
                </ui:VisualElement>
                <ui:VisualElement name="confirmation-dialog" class="confirmation-dialog" style="display: none;">
                    <ui:Label name="confirmation-label" class="confirmation-label"/>
                    <ui:VisualElement class="confirmation-buttons">
                        <ui:Button name="approve-button" text="Approve"/>
                        <ui:Button name="deny-button" text="Deny"/>
                    </ui:VisualElement>
                </ui:VisualElement>
            </ui:VisualElement>

            <ui:VisualElement name="settings-panel" class="settings-panel"
                              style="display: none; min-width: 350px; max-width: 500px; padding: 5px;">
                <ui:Label text="Ariko Assistant Settings" class="header-label"/>
                <ui:Label text="API Configuration" class="sub-header-label"/>
                <ui:Label text="API Keys are read from environment variables first." class="help-box"/>
                <ui:TextField label="Google API Key" name="google-api-key"/>
                <ui:TextField label="OpenAI API Key" name="openai-api-key"/>
                <ui:TextField label="Ollama URL" name="ollama-url"/>
                <ui:Label text="Customization" class="sub-header-label"/>
                <uie:ColorField label="Ariko BG Color" name="ariko-bg-color"/>
                <uie:ColorField label="User BG Color" name="user-bg-color"/>
                <uie:ObjectField label="Chat Font" name="chat-font"
                                 type="UnityEngine.Font, UnityEngine.TextRenderingModule"/>
                <uie:IntegerField label="Chat Font Size" name="chat-font-size"/>
                <uie:IntegerField label="Chat History Size" name="chat-history-size"
                                  tooltip="How many past chat sessions to keep in history. Set to 0 for infinite."/>
                <ui:Toggle label="Bold role labels" name="role-bold-toggle"/>
                <ui:Toggle label="Enable Delete Tools" name="enable-delete-tools-toggle"
                           tooltip="Enables agent tools for deleting files and GameObjects. Use with caution."/>
                <ui:Label text="System Prompt" class="sub-header-label"/>
                <ui:TextField name="system-prompt" multiline="true" style="flex-grow: 1;" class="system-prompt-field"/>
                <ui:Label text="Agent System Prompt" class="sub-header-label"/>
                <ui:TextField name="agent-system-prompt" multiline="true" style="flex-grow: 1;"
                              class="system-prompt-field"/>
                <ui:Button text="Save &amp; Close" name="save-settings-button" style="height: 30px;"/>
            </ui:VisualElement>
        </ui:VisualElement>

        <uie:Toolbar>
            <ui:VisualElement style="flex-grow: 1;"/>
            <ui:Label name="status-label" text="Ready" class="status-label"/>
        </uie:Toolbar>
    </ui:VisualElement>
</ui:UXML>
